== CMDS ==

upgraded to 32KB of RAM (beware w/ Teensy 3.2 64KB total)

 ... SIN is #100
__
 101 A = SQRT( x )
 102 A = POW( x, y )
__
 103 RECT x,y,w,h[,color[,mode]]
     color 0 BLACK / 1 WHITE
     mode  0 draw / 1 fill / 2 fill grey (1/2 pixel)
__
 104 FOPEN "toto.txt",1,"W"
 105 FCLOSE 1 // wher '1' is the file descriptor

 106 FWRITE 1, CHR$(1)+"Hello"+CHR$(0)
     ' allow bin & text writing (append mode)

 107 A  = FREAD 1   : ' reads a single byte
 108 A$ = FREADLN 1 : ' reads a text line
 109 FREADARRAY 1, "AR", 3 : reads 3 bytes then stores in DIM AR(3)
 

) when Fs Ops will be OK -> restore the Serial PRGM comm.
) could reserve some numbers for Serial/ BT /TCP Socket


autocomplete name -> UPPERCASE -> OK
                  -> use it for playTune too -> TODO

== ESP32 ==

06:40 - 07:20
  3.7v 350mAh
  -> ecran encore affiched mais plus rien ne reponds
     correctement au niveau des boutons

ESP.restart() -- restarts the CPU -> OK
 > to use for 'BYE' cmd ==> DONE


UP + BTN1 + BTN2 -> SYSMENU.BAS -> OK (but need a CRLF before ...)
fix drawBPP -> OK
use ESP32 getBreakSignal() -> OK

(((((((((((((((((((((
BEWARE w/ LiPo & ANALOGREAD

  ESP.getVcc()
may be used to measure supply voltage.  ESP needs to reconfigure the ADC at startup in order for
this feature to be available. Add the following line to the top of your sketch to use
getVcc
:
ADC_MODE(ADC_VCC);
)))))))))))))))))))))

== TODO ==
IPC between Java & C w/ pseudo file
  http://www.jonathanbeard.io/tutorials/CtoJava
  $> mkfifo toto

  then 'toto' is seen as file 
    C can write in it
    Java can read it

RPI Java FrameBuffer
  /vm_mnt/devl/Arduino/rpiZeroW/Java/testFB

  so make a Faked Java interface instead of JNI way
   > in progress + ( mkfifo /tmp/vgat ) for local-local serialport emulation
 _______
  > ^[halt => have to halt the RPI

  > for GUI version : 
    font size :
     900px / 50ch = 18px font height
     12px * 100ch = 1200px screen width ....

  > or just double the font zoom
    6x2 -> 12px -> 1200px SCR_WIDTH
    8x2 -> 16px -> 800px  SCR_HEIGHT

  > add pseudo interrupt to handle RPID feeback
    (Serial1 listening)

== DONE ==
(OK) ASC( STR$ ) : returns ascii code of 1st char of STR$
      \__ inv of CHR$(.)
(OK) INSTR( STR$, STRtoFIND$ ) -> indexOf
(OK) MILLIS   -> function that returns millis from MCU boot

(OK) DIRARRAY [done]
 -> creates DIR$(128)
    last entry is "-EOF-"

(OK) detection of editor mode + SYSMENU.BAS
"SYSMENU.BAS" -> to SET mute, console, reset .... (customizable system menu)
  \___ can be called by F1 when in editor mode
  \___ TODO --- beware : if chain "..." will erase current PRGM !!!!!

(??)
---> could start by a save "tmp" / chain "sysmenu" / load "tmp"

== TODO ==

on COMPUTER : manage BCKSPACE
              Ctrl-C & F1 keys
              charUpCase on filenames
              play mp3s

exec "vgat","reboot"
exec "wifi","connect","<essid>","<keypass>"

test INKEY$ => check behaviour (non blocking getKey)

DIR args -> check for executeMode

CONSOLE  -> can cause dead-locks (may comes from args parse....)

LIST on LIGHT5.BAS -> causes dead-locks (it doesn't on MP3.BAS)


SD2SER / SER2SD todo + later make as same for BT HC-06 (for wireless uploading)
|\___ impl. XON/XOFF protocol to increase commm. speed
|           Headers for file uploading/downloading
|            \__ <name-0><sizeHSB><sizeLSB>
|
 \__ as EXEC "FILE","SD2SER","LIGHT5.BAS" ?????


EXEC "FILE","DIRARRAY","AB$"[,"*.BAS"] -> AB$(.) feeded w/ "DIR *.BAS content"

_____________________________________________________

== DONE ==

* removed VGATxt + USBKbd double same port initialisation code (keep only one - VGAT) ===> NOT WORKING

* VGAT display optimization
   \___ @ this time : keep vid-char-mem
   \___ but display text & chars directly to Serial port ===> WORKS

* host_getKey() & breakcheck --> ESC / BREAK / Ctrl-C    ===> WORKS
__________________________________________________________________

1 METI.BPP
2 BOOT.BPP
3 LAMBO.BPP
4 LOTUS.BPP
5 BLAST.BPP
6 CC3.BPP

1 MONKEY.T5K
2 WINDMILL.T5K
3 LOTUS.T5K
4 XENON.T5K
5 ELF.T5K
6 SPBALL.T5K

1 IMPERIAL.T53
2 MARIO.T53
3 STUNTS.T53
4 LOTUS3.T53
5 DUEL.T53
6 CC3.T53

__________________________________________________________________


___________________________________
=====> start by wire the Serial5 ====>  \__ DONE
=====> check if MP3 boot is OK ????     /

start to impl "EXEC" .... to control MP3 module .... => DONE
exec "MP3" "PLAY"  & exec "MP3" "play" works
___________________________________

* Serial Port Map *
Serial  -> USB UART                       => DONE
Serial2 -> BT HC-06
Serial3 -> kbd/vga text                   => DONE
Serial4 -> ESP-over-328 ---> may be replaced by a NodeMCU module ....
Serial5 -> DFPlayer mp3 module @ 9600 bps => DONE

___________________________________
DFPlayer mp3 module is 5v VCC / but 3.3v logical RX/TX @ 9600bps
 -> requires an uSDCard to work
 -> SDCARD need to have a /MP3/ in it & numbered files inside ex. 01_toto.mp3

' Set Volume & play StarFox Theme
exec "mp3","vol",30 : exec "mp3","play",14 
___________________________________

OUT : out a char of ascii code                                                 ex. OUT 65 / OUT 0,65 -> to outchar to Serial specifically
INP : wait a single char \__ from current input -or- can specify a device ???? ex. K = INP(0)
SNS : read a single char /
CAT --> just display a plain file content (see LLIST) but not mandatory to Serial -> use current console device


OPEN / CLOSE (for files) + FINPUT / FPRINT (to not have to manage file descr literals ?????)

BEWARE : max 128 cmds --> else will distord 0x80 (end of token) descriptor


____________________________________________________________________________

BEEP Vs TONE : BEEP in /50ms TONE /Xms
 \___ kept BEEP only @ this time


SECS() : returns the nb of seconds since boot ( return milis() / 1000 )
 \___ DONE

CHAIN "<prgm>"
 \___ DONE

PSET / PRESET / LINE / CIRCLE --> DONE

_____ for LIGHT5 ______
END --> doesn't work ? -> use STOP

system variables : "SCR_WIDTH" & "SCR_HEIGHT"
_______________________

EXEC "WIFI","PARCEL"
EXEC "VGAT"

EXEC "AUDIO","PLAY",10


fileio descr. & use -OR- console to set current I/O devices
            CONSOLE out,in,gfx - in progress    GFX --> BUILTIN_LCD / VGAT /... --> in progress (impl.: GCLS, GPRINT, GLOCATE)
                                                SFX ????

USB HOST KBD.. >> DONE (todo : finish EscKeyRead + getKey)
  '@' is '"'             => DONE
  '#' is ??? [194]+[163] => DONE

DUMPSTS   --> SD2SER SER2SD
WRITE
WRITETEXT



 

